<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Constellations Viewer</title>
    <style>
        body { 
            margin: 0; 
            background-color: #000022; /* Solid dark blue */
            overflow: hidden; 
            position: relative; /* For absolute positioning of the button */
        }
        canvas { display: block; }
        
        /* Style for the Home Button */
        .home-button {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background-color: #ff6347;
            color: white;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1; /* Make sure the button stays on top */
        }
        .home-button:hover {
            background-color: #ff4500;
        }
    </style>
</head>
<body>
    <button class="home-button" onclick="goHome()">Home</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three/examples/js/controls/OrbitControls.min.js"></script>
    <script>
        // Initialize the scene
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Add camera controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);

        // Raycaster and mouse for hover detection
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        // Create a circular texture for stars
        const starCanvas = document.createElement('canvas');
        starCanvas.width = 128;
        starCanvas.height = 128;

        const ctx = starCanvas.getContext('2d');
        const gradient = ctx.createRadialGradient(64, 64, 0, 64, 64, 64);
        gradient.addColorStop(0, '#FFFF00'); // Bright yellow center
        gradient.addColorStop(0.5, 'rgba(255, 255, 0, 0.6)');
        gradient.addColorStop(1, 'rgba(255, 255, 0, 0.1)');

        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(64, 64, 64, 0, Math.PI * 2);
        ctx.fill();

        const starTexture = new THREE.CanvasTexture(starCanvas);

        // Material for stars and lines
        const starMaterial = new THREE.PointsMaterial({
            map: starTexture,
            size: 1.5, // Larger size for stars
            transparent: true,
            blending: THREE.AdditiveBlending
        });

        const lineMaterial = new THREE.LineBasicMaterial({ color: 0x88CCFF });
        const hoverLineMaterials = [
            new THREE.LineBasicMaterial({ color: 0xFF0000 }), // Red
            new THREE.LineBasicMaterial({ color: 0x00FF00 }), // Green
            new THREE.LineBasicMaterial({ color: 0x0000FF }), // Blue
            new THREE.LineBasicMaterial({ color: 0xFFFF00 }), // Yellow
            new THREE.LineBasicMaterial({ color: 0xFF00FF }), // Magenta
            new THREE.LineBasicMaterial({ color: 0x00FFFF }), // Cyan
            new THREE.LineBasicMaterial({ color: 0xFFFFFF })  // White
        ];

        const hoverObjects = []; // Objects to detect hover

        // Define constellations
        const constellations = [
            {
                name: "Ursa Major",
                stars: [
                    new THREE.Vector3(-30, 50, -10),
                    new THREE.Vector3(-20, 40, 0),
                    new THREE.Vector3(-10, 30, 10),
                    new THREE.Vector3(0, 20, 15),
                    new THREE.Vector3(10, 20, 20),
                    new THREE.Vector3(20, 30, 20),
                    new THREE.Vector3(30, 40, 15)
                ]
            },
            {
                name: "Ursa Minor",
                stars: [
                    new THREE.Vector3(-10, 50, 30),
                    new THREE.Vector3(-15, 40, 20),
                    new THREE.Vector3(-20, 30, 15),
                    new THREE.Vector3(-25, 20, 10),
                    new THREE.Vector3(-30, 10, 5),
                    new THREE.Vector3(-40, 0, 0),
                    new THREE.Vector3(-50, -10, -5)
                ]
            },
            {
                name: "Orion",
                stars: [
                    new THREE.Vector3(0, 0, 0),
                    new THREE.Vector3(10, -20, -10),
                    new THREE.Vector3(-10, -10, -20),
                    new THREE.Vector3(-20, -20, -10),
                    new THREE.Vector3(-5, -15, -10),
                    new THREE.Vector3(0, -15, -10),
                    new THREE.Vector3(5, -15, -10)
                ]
            },
            {
                name: "Cassiopeia",
                stars: [
                    new THREE.Vector3(-40, 50, 20),
                    new THREE.Vector3(-30, 40, 15),
                    new THREE.Vector3(-20, 30, 10),
                    new THREE.Vector3(-10, 20, 15),
                    new THREE.Vector3(0, 30, 20)
                ]
            },
            {
                name: "Andromeda",
                stars: [
                    new THREE.Vector3(30, 60, -20),
                    new THREE.Vector3(20, 50, -10),
                    new THREE.Vector3(10, 40, 0),
                    new THREE.Vector3(0, 30, 10)
                ]
            },
            {
                name: "Antlia",
                stars: [
                    new THREE.Vector3(-30, -30, -50),
                    new THREE.Vector3(-20, -20, -40),
                    new THREE.Vector3(-10, -10, -30)
                ]
            },
            {
                name: "Apus",
                stars: [
                    new THREE.Vector3(50, -50, 20),
                    new THREE.Vector3(60, -60, 30),
                    new THREE.Vector3(70, -70, 40)
                ]
            },
            {
                name: "Aquarius",
                stars: [
                    new THREE.Vector3(10, 60, -20),
                    new THREE.Vector3(15, 50, -30),
                    new THREE.Vector3(20, 40, -25),
                    new THREE.Vector3(25, 30, -20),
                    new THREE.Vector3(30, 20, -15),
                    new THREE.Vector3(35, 10, -10)
                ]
            },
            {
                name: "Cancer",
                stars: [
                    new THREE.Vector3(-30, 40, 10),
                    new THREE.Vector3(-25, 30, 5),
                    new THREE.Vector3(-20, 20, 10),
                    new THREE.Vector3(-15, 10, 15),
                    new THREE.Vector3(-10, 20, 20)
                ]
            },
            {
                name: "Auriga",
                stars: [
                    new THREE.Vector3(0, 50, 30),
                    new THREE.Vector3(10, 40, 35),
                    new THREE.Vector3(20, 30, 30),
                    new THREE.Vector3(30, 20, 25),
                    new THREE.Vector3(40, 10, 20)
                ]
            },
            {
                name: "Draco",
                stars: [
                    new THREE.Vector3(-50, 60, -10),
                    new THREE.Vector3(-40, 50, -5),
                    new THREE.Vector3(-30, 40, 0),
                    new THREE.Vector3(-20, 30, -5),
                    new THREE.Vector3(-10, 20, -10),
                    new THREE.Vector3(-5, 10, -15)
                ]
            },
            {
                name: "Hercules",
                stars: [
                    new THREE.Vector3(-20, -20, 40),
                    new THREE.Vector3(-10, -10, 45),
                    new THREE.Vector3(0, 0, 50),
                    new THREE.Vector3(10, 10, 55),
                    new THREE.Vector3(20, 20, 60),
                    new THREE.Vector3(30, 30, 65)
                ]
            }
        ];


        // Add constellations to the scene
        constellations.forEach((constellation, index) => {
            const starCoords = [];
            let center = new THREE.Vector3(0, 0, 0);

            constellation.stars.forEach(star => {
                starCoords.push(star.x, star.y, star.z);
                center.add(star);
            });

            center.divideScalar(constellation.stars.length);

            // Add stars
            const starGeometry = new THREE.BufferGeometry();
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starCoords, 3));
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);

            // Add lines
            const lineGeometry = new THREE.BufferGeometry().setFromPoints(constellation.stars);
            const line = new THREE.Line(lineGeometry, lineMaterial);
            scene.add(line);

            // Add hover object
            const hoverSphere = new THREE.Mesh(
                new THREE.SphereGeometry(5, 32, 32),
                new THREE.MeshBasicMaterial({ visible: false })
            );
            hoverSphere.position.copy(center);
            hoverSphere.userData = { constellation, line, index };
            scene.add(hoverSphere);
            hoverObjects.push(hoverSphere);

            // Add name
            const label = createTextSprite(constellation.name, center);
            scene.add(label);
        });

        // Function to create a text label for the constellation
        function createTextSprite(text, position) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            context.font = '40px Arial'; // Kid-friendly font
            context.fillStyle = 'white';
            context.textAlign = 'center';
            context.fillText(text, canvas.width / 2, canvas.height / 2);

            const texture = new THREE.CanvasTexture(canvas);
            const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
            const sprite = new THREE.Sprite(spriteMaterial);

            sprite.scale.set(20, 10, 1); // Adjust size of the label
            sprite.position.copy(position);
            return sprite;
        }

        // Detect mouse movement
        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        window.addEventListener('mousemove', onMouseMove);

        // Animate the scene
        function animate() {
            requestAnimationFrame(animate);

            // Update raycaster
            raycaster.setFromCamera(mouse, camera);

            // Check for intersections
            const intersects = raycaster.intersectObjects(hoverObjects);
            hoverObjects.forEach(obj => {
                obj.userData.line.material = lineMaterial; // Reset line material
            });

            if (intersects.length > 0) {
                const hovered = intersects[0].object;
                const index = hovered.userData.index;
                hovered.userData.line.material = hoverLineMaterials[index % hoverLineMaterials.length];
            }

            controls.update();
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        camera.position.set(0, 0, 100);
        animate();

        // Function to handle the "Home" button click
        function goHome() {
            window.location.href = 'index.html'; // Redirect to homepage (or any URL)
        }
    </script>
</body>
</html>
